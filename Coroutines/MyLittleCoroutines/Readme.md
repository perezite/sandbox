Yet another approach at c++ coroutines using macros